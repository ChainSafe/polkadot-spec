\documentclass{book}
\usepackage{plantuml} %%digarams

\begin{document}

\begin{figure}[h!]
\begin{plantuml}
@startuml
start

:Send PoV to PoV;
:Pv validate the PoV and
produce the candidate receipt;

repeat :Gossip candidate receipt and attestations among PV;
  :PVs provide attestations for candidate
  receipt generated by other PV;
repeat while (Do we have enough attestations?) is (no)

:Gossip Candidate receipt with enough attestations to everyone;

:Candidate receipt corresponding attestations are put on the relay chain;
:Parachain validators send out erasure coded pieces to all V;

:Validators vote on whether they have the erasure coded pieces for every current candidate;
while (Do 2/3 say on the relay chain that the erasure coded pieces are available?) is (no)
  if (Has the block timed out after several blocks or a validator set change?) then (yes)
    :Throw away this candidate receipt and start accepting alternative ones;
  else (no)
  endif
endwhile (yes);

:The relay chain acts on the candidate receipt. The parachain block happens on this fork;

end
@enduml
\end{plantuml}
\caption{TODO}
\end{figure}

\end{document}